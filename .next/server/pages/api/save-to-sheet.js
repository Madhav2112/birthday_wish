"use strict";(()=>{var e={};e.id=695,e.ids=[695],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},249:(e,o)=>{Object.defineProperty(o,"l",{enumerable:!0,get:function(){return function e(o,s){return s in o?o[s]:"then"in o&&"function"==typeof o.then?o.then(o=>e(o,s)):"function"==typeof o&&"default"===s?o:void 0}}})},544:(e,o,s)=>{s.r(o),s.d(o,{config:()=>p,default:()=>l,routeModule:()=>u});var t={};s.r(t),s.d(t,{config:()=>a,default:()=>_});var r=s(802),n=s(153),i=s(249);let E=require("googleapis"),a={api:{bodyParser:!0}};async function _(e,o){try{if(console.log("HAS_B64:",!!process.env.GOOGLE_PRIVATE_KEY_B64),console.log("B64_LENGTH:",process.env.GOOGLE_PRIVATE_KEY_B64?process.env.GOOGLE_PRIVATE_KEY_B64.length:0),console.log("HAS_CLIENT_EMAIL:",!!process.env.GOOGLE_CLIENT_EMAIL),console.log("HAS_SHEET_ID:",!!process.env.SHEET_ID),!process.env.GOOGLE_PRIVATE_KEY_B64)throw Error("Missing GOOGLE_PRIVATE_KEY_B64");if(!process.env.GOOGLE_CLIENT_EMAIL)throw Error("Missing GOOGLE_CLIENT_EMAIL");if(!process.env.SHEET_ID)throw Error("Missing SHEET_ID");let s=Buffer.from(process.env.GOOGLE_PRIVATE_KEY_B64,"base64").toString("utf8");console.log("DECODE_FIRST_LINE:",s.split("\n")[0]),console.log("DECODE_LAST_LINE:",s.split("\n").slice(-2).join(" | "));let t=new E.google.auth.JWT(process.env.GOOGLE_CLIENT_EMAIL,null,s,["https://www.googleapis.com/auth/spreadsheets"]);await t.authorize(),console.log("AUTH_SUCCESS");let r=E.google.sheets({version:"v4",auth:t}),n=e.body||{};await r.spreadsheets.values.append({spreadsheetId:process.env.SHEET_ID,range:"Sheet1!A1",valueInputOption:"RAW",requestBody:{values:[[n.timestamp||new Date().toISOString(),n.name||"",n.city||"",n.region||"",n.country||"",n.isp||"",n.deviceType||"",n.browser||"",n.screenSize||"",n.fingerprint||""]]}}),o.status(200).json({message:"Saved to sheet"})}catch(e){console.error("SAVE_TO_SHEET_ERROR:",e.message||e),o.status(500).json({error:e.message||String(e)})}}let l=(0,i.l)(t,"default"),p=(0,i.l)(t,"config"),u=new r.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/save-to-sheet",pathname:"/api/save-to-sheet",bundlePath:"",filename:""},userland:t})},153:(e,o)=>{var s;Object.defineProperty(o,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},802:(e,o,s)=>{e.exports=s(145)}};var o=require("../../webpack-api-runtime.js");o.C(e);var s=o(o.s=544);module.exports=s})();