<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>The Birthday Riddle</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
  width: 100%; height: 100%; overflow: hidden;
  font-family: system-ui, sans-serif;
  background: #050514;
  color: #f5f5ff;
}
body { display: flex; align-items: center; justify-content: center; }

.container {
  position: relative;
  width: 100vw; height: 100vh;
  padding: 20px;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  text-align: center;
  background:
    radial-gradient(circle at 20% 0, rgba(146,83,255,0.25) 0, transparent 55%),
    radial-gradient(circle at 80% 0, rgba(0,196,255,0.25) 0, transparent 55%);
}

/* Stars */
.stars { position: absolute; inset: 0; pointer-events: none; z-index: 1; }
.star {
  position: absolute; width: 2px; height: 2px; border-radius: 50%;
  background: rgba(255,255,255,0.8); opacity: 0.2;
  animation: twinkle 3s infinite ease-in-out;
}
@keyframes twinkle {
  0%,100% { opacity: 0.15; }
  50% { opacity: 1; }
}

/* Content */
.title {
  font-size: 1.8rem;
  margin-bottom: 10px;
  text-shadow: 0 0 14px rgba(186,134,255,0.9);
  z-index: 2;
}

.riddle-box {
  background: rgba(22,18,48,0.8);
  padding: 20px 30px;
  border-radius: 12px;
  border: 1px solid rgba(155,144,255,0.4);
  max-width: 650px;
  font-size: 1.05rem;
  line-height: 1.6;
  z-index: 2;
}

.input-area {
  margin-top: 20px;
  z-index: 2;
}

input {
  padding: 10px 16px;
  border-radius: 8px;
  border: none;
  outline: none;
  width: 260px;
  font-size: 1rem;
  background: rgba(255,255,255,0.1);
  color: #fff;
  text-align: center;
  border: 1px solid rgba(255,255,255,0.3);
  transition: 0.2s;
}
input:focus {
  border-color: #ffc6ff;
  box-shadow: 0 0 10px rgba(255,198,255,0.6);
}

button {
  margin-top: 10px;
  padding: 8px 18px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  background: #ffc6ff;
  color: #2a0036;
  font-weight: 600;
  transition: 0.2s;
}
button:hover {
  transform: scale(1.05);
}

.buttons-row {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 10px;
}

.feedback {
  margin-top: 14px;
  min-height: 22px;
  font-size: 1rem;
  color: #ffd6ff;
  text-shadow: 0 0 8px rgba(255,197,255,0.6);
  z-index: 2;
}

.hint-text {
  margin-top: 4px;
  min-height: 18px;
  font-size: 0.9rem;
  color: #c2c6ff;
  z-index: 2;
}

/* Success star */
.success-star {
  opacity: 0;
  font-size: 3rem;
  margin-top: 20px;
  transform: scale(0.1);
  transition: 0.8s ease-out;
  z-index: 2;
}
.success-star.visible {
  opacity: 1;
  transform: scale(1);
}

/* Confetti */
.confetti {
  position: fixed;
  width: 8px;
  height: 14px;
  background: red;
  top: -10px;
  border-radius: 2px;
  opacity: 0.9;
  z-index: 9999;
  pointer-events: none;
  transition: transform 1.4s linear, top 1.4s linear;
}
</style>
</head>

<body>
<div class="container">

  <div class="stars" id="stars"></div>

  <div class="title">Module 3 • The Birthday Riddle</div>

  <div class="riddle-box">
    <b>Riddle:</b><br><br>
    “I’m not the sky,<br>
    I’m not the moon,<br>
    I’m not the stars that softly shine.<br>
    But on this day each year,<br>
    I’m the one<br>
    the whole universe seems to celebrate.<br>
    What am I?”
  </div>

  <div class="input-area">
    <input id="answerInput" placeholder="Type your answer..." />
    <div class="buttons-row">
      <button onclick="checkAnswer()">Submit</button>
      <button onclick="showHint()">Hint</button>
    </div>
  </div>

  <div class="feedback" id="feedback"></div>
  <div class="hint-text" id="hintText"></div>

  <div class="success-star" id="successStar">⭐</div>

</div>

<script>
/* STARFIELD */
(function(){
  const c = document.getElementById("stars");
  for(let i=0;i<120;i++){
    const s=document.createElement("div");
    s.className="star";
    s.style.left=Math.random()*100+"%";
    s.style.top=Math.random()*100+"%";
    s.style.animationDelay=Math.random()*3+"s";
    c.appendChild(s);
  }
})();

/* CONFETTI */
function launchConfetti() {
  const duration = 1500;
  const end = Date.now() + duration;

  (function frame() {
    const confetti = document.createElement("div");
    confetti.className = "confetti";
    confetti.style.left = Math.random() * 100 + "vw";
    confetti.style.background = `hsl(${Math.random() * 360}, 90%, 70%)`;

    document.body.appendChild(confetti);

    requestAnimationFrame(() => {
      confetti.style.top = "110vh";
      confetti.style.transform =
        `translateX(${(Math.random() - 0.5) * 200}px) rotate(${Math.random() * 720}deg)`;
    });

    setTimeout(() => confetti.remove(), 1500);

    if (Date.now() < end) requestAnimationFrame(frame);
  })();
}

/* HINT LOGIC */
const hints = [
  "Hint 1: It’s not an object… it’s a person.",
  "Hint 2: It’s the person whose birthday it is.",
  "Final Hint: The answer is literally you."
];
let hintIndex = 0;

function showHint() {
  const hintEl = document.getElementById("hintText");
  if (hintIndex < hints.length) {
    hintEl.textContent = hints[hintIndex];
    hintIndex++;
  } else {
    hintEl.textContent = hints[hints.length - 1];
  }
}

/* CHECK ANSWER */
function checkAnswer() {
  const raw = document.getElementById("answerInput").value.trim().toLowerCase();
  const feedback = document.getElementById("feedback");
  const star = document.getElementById("successStar");

  // Accept "you", "it's you", "its you", "you are", "it is you"
  const normalized = raw.replace(/[^a-z]/g, " ").replace(/\s+/g, " ").trim();

  const validAnswers = ["you", "its you", "it's you", "you are", "it is you","me"];
  const isCorrect = validAnswers.includes(normalized);

  if (isCorrect) {
    feedback.textContent = "Exactly. The universe is celebrating you.";
    star.classList.add("visible");
    launchConfetti();

    setTimeout(() => {
      window.location.href = "module5.html";
    }, 1800);

  } else if (raw.length === 0) {
    feedback.textContent = "Type your guess first.";
  } else {
    feedback.textContent = "Not quite. Try thinking about who this day is really for.";
  }
}
</script>

</body>
</html>